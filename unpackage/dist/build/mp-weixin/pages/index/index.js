(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0f86":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=u(n("a34a")),o=n("77a4"),r=u(n("bd19"));function u(e){return e&&e.__esModule?e:{default:e}}function i(e){return f(e)||l(e)||c(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return d(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function g(e,t,n,a,o,r,u){try{var i=e[r](u),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(a,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function u(e){g(r,a,o,u,i,"next",e)}function i(e){g(r,a,o,u,i,"throw",e)}u(void 0)}))}}var p=null,h={data:function(){return{list:[],flag:!1,num:0,top_flag:!1,loading_flag:!1,addressName:"",areaName:"",zType:"",zTime:"",message:"",popupFlag:!1,cityValue:"",subscribePullDownRefresh:!0,getLocationFlag:!0}},filters:{formatData:function(e){if(null===e)return"未知";var t=e.split("省");return t.length>1?t[1]:e}},onShareAppMessage:function(e){return{title:"招标哥，每天免费给用户提供10000+条政府企事业单位的招标采购数据",path:"/pages/index/index"}},onLoad:function(){},onReachBottom:function(){var e=this;e.subscribePullDownRefresh&&(e.loading_flag=!0),null!=p&&clearTimeout(p),p=setTimeout((function(){e.subscribePullDownRefresh&&e.get()}),500)},onShow:function(){var t=e.getStorageSync("zbgerUserInfo"),n=e.getStorageSync("getLocationFlag"),a=e.getStorageSync("this.cityValue"),o=this;if(t)if(t.subscribe){var u=[],i=[];t.subscribe.areaCodes.forEach((function(e){r.default.some((function(t){e===t.value?u.push(e):null!==t.children&&t.children.some((function(t){t.value===e&&i.push(e)}))}))}));var s=t.subscribe.subscribeType,c=t.subscribe.subscribeDesc;e.request({url:"https://zbger.com:8443/zbger/subscribe/findThirtyData",method:"GET",data:{provinceCode:u,cityCode:i,announcementType:s,subscribeDesc:c},success:function(e){e.data.data.forEach((function(t){t["radio_flag"]=!0,o.list=e.data.data})),o.subscribePullDownRefresh=!1,o.flag=!0}})}else e.request({url:"https://zbger.com:8443/zbger/subscribe/findSubscribeByOpenid",data:{openid:t.openId},success:function(t){if(console.log(t),0===t.data.code){var u=[],i=[];if(t.data.data.subscribe){t.data.data.subscribe.areaCodes.forEach((function(e){r.default.some((function(t){e.areaCode===t.value?u.push(e.areaCode):null!==t.children&&t.children.some((function(t){t.value===e.areaCode&&i.push(e.areaCode)}))}))}));var s=t.data.data.subscribe.subscribeType,c=t.data.data.subscribe.subscribeDesc;e.request({url:"https://zbger.com:8443/zbger/subscribe/findThirtyData",method:"GET",data:{provinceCode:u,cityCode:i,announcementType:s,subscribeDesc:c},success:function(e){e.data.data.forEach((function(t){t["radio_flag"]=!0,o.list=e.data.data})),o.subscribePullDownRefresh=!1,o.flag=!0}})}}else o.subscribePullDownRefresh=!0,o.flag=!1,a?(o.cityValue=a,o.get()):!1!==n?o.getLocation():o.get()},fail:function(){o.subscribePullDownRefresh=!0,o.flag=!1,a?(o.cityValue=a,o.get()):!1!==n?o.getLocation():o.get()}});else o.subscribePullDownRefresh=!0,o.flag=!1,a?(o.cityValue=a,o.get()):!1!==n?o.getLocation():o.get()},onPullDownRefresh:function(){this.subscribePullDownRefresh&&this.get()},methods:{login:function(t){var n=this,a=t.detail.userInfo,o=a.avatarUrl,r=a.nickName;console.log(a),e.login({success:function(t){var a=t.code,u={};u.avatarUrl=o,u.nickName=r,n.popupFlag=!1,e.request({url:"https://zbger.com:8443/zbger/wechatAppletsUser/login",method:"POST",data:{avatarUrl:o,nickName:r,code:a},success:function(t){console.log(t),0===t.data.code?(u.openId=t.data.msg,e.setStorageSync("zbgerUserInfo",u),n.$refs.uToast.show({title:"登录成功",type:"success",position:"top"})):n.$refs.uToast.show({title:"授权失败",type:"err",position:"top"})}})}})},getLocation:function(){var t=this;return b(a.default.mark((function n(){var r,u;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,o.getCity)();case 2:if(r=n.sent,console.log(r),null!==r){n.next=8;break}return e.setStorageSync("getLocationFlag",!1),t.get(),n.abrupt("return");case 8:if(e.setStorageSync("getLocationFlag",!0),u=r.ad_info.city_code,null===u||void 0===u||""===u){n.next=19;break}if(console.log(u.substring(0,2)),"156"===u.substring(0,3)){n.next=17;break}return t.get(),n.abrupt("return");case 17:t.cityValue=u.substring(3,5)+"0000",e.setStorageSync("cityValue",t.cityValue);case 19:t.list=[],t.get();case 21:case"end":return n.stop()}}),n)})))()},top:function(){console.log(this.areaName),e.pageScrollTo({scrollTop:0,duration:300})},onPageScroll:function(e){e.scrollTop>600?this.top_flag=!0:this.top_flag=!1},nav:function(){e.navigateTo({url:"../message/message"})},det:function(t){var n=t.currentTarget.dataset,a=n.address,o=n.time,r=n.gxxtext,u=(t=n.url,n.enclosurename),i=n.enclosureurl,s=n.announcementname,c=n.index;n.radio_flag=!1,this.list[c].radio_flag=!1;var l=e.getStorageSync("zbgerUserInfo");null!==l&&""!==l&&"null"!==l?e.navigateTo({url:"../notice/total?a="+s+"&b="+a+"&c="+o+"&d="+r+"&e="+t+"&f="+u+"&g="+i}):this.popupFlag=!0},get:function(){var t=this;return b(a.default.mark((function n(){var o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("get"),n.next=3,t.$myRequest({url:"/zbger/inviteTenders/findTenData?provinceCode="+t.cityValue+"&announcementType="+t.zType+"&day="+t.zTime+"&keyword="+t.message+"&pageNo="+t.num});case 3:o=n.sent,o.data.data.forEach((function(e){e["radio_flag"]=!0})),e.stopPullDownRefresh(),t.num=t.num+10,t.list=[].concat(i(t.list),i(o.data.data)),t.list.length<10&&(console.log(t.list.length),console.log(t.num),t.flag=!0);case 9:case"end":return n.stop()}}),n)})))()}}};t.default=h}).call(this,n("543d")["default"])},"1bde":function(e,t,n){},"527e":function(e,t,n){"use strict";n.r(t);var a=n("0f86"),o=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=o.a},"7bac":function(e,t,n){"use strict";n.r(t);var a=n("d699"),o=n("527e");for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n("e757"),n("a9b3");var u,i=n("f0c5"),s=Object(i["a"])(o["default"],a["b"],a["c"],!1,null,"576807df",null,!1,a["a"],u);t["default"]=s.exports},"97b5":function(e,t,n){},a9b3:function(e,t,n){"use strict";var a=n("1bde"),o=n.n(a);o.a},d699:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}));var a={uToast:function(){return n.e("node-modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"874a"))},uLoading:function(){return n.e("node-modules/uview-ui/components/u-loading/u-loading").then(n.bind(null,"14eb"))},uPopup:function(){return n.e("node-modules/uview-ui/components/u-popup/u-popup").then(n.bind(null,"8910"))},uButton:function(){return n.e("node-modules/uview-ui/components/u-button/u-button").then(n.bind(null,"92a9"))}},o=function(){var e=this,t=e.$createElement,a=(e._self._c,n("7e15")),o=e.__map(e.list,(function(t,n){var a=e.__get_orig(t),o=e._f("formatData")(t.address);return{$orig:a,f0:o}}));e.$mp.data=Object.assign({},{$root:{m0:a,l0:o}})},r=[]},e757:function(e,t,n){"use strict";var a=n("97b5"),o=n.n(a);o.a},ff02:function(e,t,n){"use strict";(function(e){n("78ac");a(n("66fd"));var t=a(n("7bac"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])}},[["ff02","common/runtime","common/vendor"]]]);